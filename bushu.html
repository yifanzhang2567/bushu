<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>一键同步步数</title>
  <style>body{font-family:sans-serif;margin:40px}</style>
</head>
<body>
  <h2>一键同步步数</h2>
  <label>账号 <input id="u"></label><br>
  <label>密码 <input id="p" type="password"></label><br>
  <label>目标 <input id="t"></label><br>
  <button onclick="sync()">同步</button>

  <!-- 隐藏的目标站 iframe -->
  <iframe id="tgt" src="https://cqzz.top/bushu/index.html"
          style="display:none;"></iframe>

  <script>
    function sync() {
      const u = document.getElementById('u').value;
      const p = document.getElementById('p').value;
      const t = document.getElementById('t').value;

      const iframe = document.getElementById('tgt');

      // 等 iframe 加载完成再注入
      if (iframe.contentDocument.readyState === 'complete') {
        inject();
      } else {
        iframe.onload = inject;
      }

      function inject() {
        const doc = iframe.contentDocument;
        doc.getElementById('account').value = u;
        doc.getElementById('password').value = p;
        doc.getElementById('target').value  = t;

        // 触发提交：找按钮或 form.submit()
        const btn = doc.querySelector('button[type=submit]') ||
                    doc.querySelector('input[type=submit]')  ||
                    doc.querySelector('#submit');
        if (btn) btn.click();
        else doc.querySelector('form').submit();
      }
    }
  </script>
</body>
</html>